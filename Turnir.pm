#!/usr/bin/perl

package Turnir;

use Common;
use Alias;
use MUD;

use strict;


my $howstr = "(|легонько|слегка|сильно|очень сильно|чрезвычайно сильно|∆≈—“ќ ќ|ЅќЋ№Ќќ|ќ„≈Ќ№ ЅќЋ№Ќќ|„–≈«¬џ„ј…Ќќ ЅќЋ№Ќќ|Ќ≈¬џЌќ—»ћќ ЅќЋ№Ќќ|”∆ј—Ќќ|—ћ≈–“≈Ћ№Ќќ)";
my $caststr = "(прикрыл.?.?.? глаза и прошептал.?.?.?|взгл€нул.?.?.? на (.*) и произнес.?.?.?|произнес.?.?.?|пробормотал.?.?.?|взгл€нул.?.?.? на (.*) и бросил.?.?.?|произнес.?.?.?)";
my $weapattack_1 = "(ударил|ободрал|хлестнул|рубанул|укусил|огрел|сокрушил|резанул|оцарапал|подстрелил|пырнул|уколол|ткнул|л€гнул|боднул|клюнул)";
my $weapattack_2 = "(ударить|ободрать|хлестнуть|рубануть|укусить|огреть|сокрушить|резануть|оцарапать|подстрелить|пырнуть|уколоть|ткнуть|л€гнуть|боднуть|клюнуть)";


my %damagers = ();
my %actors = ();
my %results = ();
my $tell_comand = "#wecho 2";
my @actors_seq = ();
my $curr_actor = '';



P::alias
{
	my $value = shift;
	if (! length $value)
	{
		P::echo '“урнир отключен';
		$tell_comand = '';
		MUD::disable_trigger 'TURNIR';
	}
	else
	{
		$tell_comand = $value;
		MUD::enable_trigger 'TURNIR';
		P::echo "“урнир включен. префикс: $tell_comand";
	}
} '_турнир';





P::trig
{
#	return unless scalar keys %damagers;
	my $str =  '';
	for (@actors_seq)
	{
		$str = $str . "$_:";
		$str = $str . "$actors{$_}" unless ($actors{$_} eq '');
		$str = $str . "[бьет $damagers{$_}]" unless ($damagers{$_} eq '');
		$results{$_} =~ s/^,//;
		$str = $str . "\($results{$_}\)" unless ($results{$_} eq '');
		$str = $str . " ";
		delete $damagers{$_};
	}

DAMAGERSCYCLE:	for (keys %damagers)
	{
		next DAMAGERSCYCLE if $_ eq '';
		$str = $str . "$_:";
		$str = $str . "[бьет $damagers{$_}]" unless ($damagers{$_} eq '');
		$results{$_} =~ s/^,//;
		$str = $str . "\($results{$_}\)" unless ($results{$_} eq '');
		$str = $str . " ";
	}

	%damagers = ();
	%actors = ();
	%results = ();
	@actors_seq = ();
	$curr_actor = '';

	my $str1 = $str;
	my $str2 = '';
	my $str3 = '';
	my $str4 = '';

	if ($str1 =~ m/^(.{250})(.*)/)
	{
		$str1 = $1;
		$str = $2;
		$str2 = $str;
		if ($str2 =~ m/^(.{250})(.*)/)
		{
			$str2 = $1;
			$str = $2;
			$str3 = $str;
			if ($str3 =~ m/^(.{250})(.*)/)
			{
				$str3 = $1;
				$str = $2;
				$str4 = $str;
				if ($str4 =~ m/^(.{250})(.*)/)
				{
					$str4 = $1;
					$str = $2;
				}
			}
		}
	}

	Common::sparser $tell_comand . " " . $str1 unless $str1 eq '';
	Common::sparser $tell_comand . " " . $str2 unless $str2 eq '';
	Common::sparser $tell_comand . " " . $str3 unless $str3 eq '';
	Common::sparser $tell_comand . " " . $str4 unless $str4 eq '';
	

} '^$','1000000-:TURNIR';


####FRAGS###


# Burning Hands

P::trig
{	
	P::echo "triger1";
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "гор.руки";
	$results{$1} .= ",RIP $2";
} "^(.*) слишком гор€чо обн€л.?.? (.*) - .* просто сгорел",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "гор.руки на $1";
	$results{$2} .= ",фэйл!";
} "^(.*) сумел.?.? избежать слишком теплого прикосновени€ (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "гор.руки на $1";
} "^(.*) заорал.?.? от боли, когда (.*) гор€чо обн€л",'f1000000-:TURNIR';


P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "гор.руки";
	$results{$2} .= ",RIP $1";
} "^(.*) узнал.?.? насколько гор€чие у (.*) руки. Ёто было последним, что ",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "гор.руки на $1";
	$results{$2} .= ",фэйл! ";
} "^(.*) смог.?.? избежать обжигающего прикосновени€ (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "гор.руки на $2";
} "^(.*) подпалил.?.? (.*) своими гор€щими руками.",'f1000000-:TURNIR';


# Call Lightning

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "шар.молн";
	$results{$1} .= ",RIP $2";
} "^ѕосле молнии, вызванной (.*), от (.*) остались одни угли.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "шар.молн на $1";
	$results{$2} .= ",фэйл!";
} "^(.*) отпрыгнул.?.? назад от посланной в н.* (.*) молнии.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "шар.молн на $1";
} "^(.*) закричал.?.? от боли, когда в н.* попала молни€, пущена€ (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "шар.молн";
	$results{$1} .= ",RIP $2";
} "^ћолни€ (.*) отправила (.*) в мир иной.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "шар.молн на $1";
	$results{$2} .= ",фэйл!";
} "^(.*) увернул.?.? от молнии (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "шар.молн на $1";
} "^¬ (.*) попала молни€ (.*)\\.",'f1000000-:TURNIR';


# Chill Touch
P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "лед.прик";
	$results{$1} .= ",RIP $2";
} "^(.*) коснул.?.?.? (.*), превратив .* в сосульку.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "лед.прик на $2";
	$results{$1} .= ",фэйл!";
} "^(.*) неудачно попытал.?.?.? заморозить (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "лед.прик на $2";
} "^(.*) прикоснул.?.?.? к (.*), котор.* теперь не т€нет на \"гор€чего парн€\".",'f1000000-:TURNIR';

P::trig
{	
	$results{$curr_actor} .= ",$2 слаб";
} "^Ѕоевый пыл (.*) несколько остыл.",'f1000000-:TURNIR';


# Color Spray
P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "брызги";
	$results{$1} .= ",RIP $2";
} "^(.*) превратил.?.?.? (.*) в мириаду разноцветных огоньков.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "брызги на $2";
	$results{$1} .= ",фэйл!";
} "^–азноцветные брызги (.*) пролетели р€дом с (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "брызги на $2";
} "^(.*) обрызгал.?.?.? (.*), котор.* просто зарыдал.?.?.? от вида сей красоты.",'f1000000-:TURNIR';

# Dispel Evil


P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "изгн.зло";
	$results{$1} .= ",RIP $2";
} "^(.*) pазве€л.?.?.? по ветру (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "изгн.зло на $1";
	$results{$2} .= ",фэйл!";
} "^(.*) улыбнул.?.?.?, гл€д€ на безуспешные попытки (.*) изгнать",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "изгн.зло на $2";
} "^(.*) изгнал.?.?.? из (.*) часть темного духа. Ќо здоровь€ .* это не прибавило.",'f1000000-:TURNIR';
# Energy Drain

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "истощ.эн";
	$results{$1} .= ",RIP $2";
} "^(.*) забрал.?.?.? остатки жизни у (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "истощ.эн на $2";
	$results{$1} .= ",фэйл!";
} "^(.*) попытал.?.?.? отн€ть жизни у (.*), но у н.* ничего не вышло.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "истощ.эн на $2";
} "^(.*) отн€л.?.?.? часть жизни у (.*)\\.",'f1000000-:TURNIR';


# Fireball
P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "фаербол";
	$results{$1} .= ",RIP $2";
} "^∆ар огненного шара (.*) оставил от (.*) лишь обугленный труп.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "фаербол на $2";
	$results{$1} .= ",фэйл!";
} "^ќгненный шар (.*) не причинил (.*) никакого вреда.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "фаербол на $2";
} "^(.*) удовлетворенно потер.?.?.? руки - .* огненный шар опалил (.*)!",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "фаербол на $2";
} "^(.*) выпустил.?.?.? огненный шар, который сильно подогрел воздух вокруг (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "фаербол";
	$results{$1} .= ",RIP $2";
} "^ѕосле огненного шара (.*) от (.*) не осталось и пепла.",'f1000000-:TURNIR';




# Harm

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "вред";
	$results{$2} .= ",RIP $1";
} "^(.*) не пережил.?.?.? вреда, причиненного .* (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "вред на $2";
	$results{$1} .= ",фэйл!";
} "^(.*) неудачно попытал.?.?.? навредить (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "вред на $2";
} "^—лова, брошенные (.*), заставили (.*) содрогнутьс€ от боли.",'f1000000-:TURNIR';


P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "вред";
	$results{$2} .= ",RIP $1";
} "^(.*) не вынес.?.?.? вреда, нанесенного .?.?.? (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "вред на $2";
	$results{$1} .= ",фэйл!";
} "^(.*) не смог.?.?.? причинить (.*) вред.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "лег.вред на $2";
} "^(.*) легко повредил.?.?.? (.*)\\.",'f1000000-:TURNIR';
P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "сер.вред на $2";
} "^(.*) серьезно повредил.?.?.? (.*)\\.",'f1000000-:TURNIR';
P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "крит.вред на $2";
} "^(.*) т€жело повредил.?.?.? (.*)\\.",'f1000000-:TURNIR';


# Lightning Bolt

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "молни€";
	$results{$1} .= ",RIP $2";
} "^Ўаровой зар€д (.*) ударил в (.*) и разметал .* останки по комнате.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "молни€ на $2";
	$results{$1} .= ",фэйл!";
} "^(.*) пытал.?.?.? попасть в (.*) шаровой молнией, но промазал",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "молни€ на $2";
} "^ѕосланна€ (.*) шарова€ молни€ ударила в лицо (.*)\\.",'f1000000-:TURNIR';

# Magic Missile

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "маг.стрел";
	$results{$1} .= ",RIP $2";
} "^ћагическа€ стрела, посланна€ (.*), погрузила (.*) в вечный сон.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "маг.стрел на $2";
	$results{$1} .= ",фэйл!";
} "^(.*) промахнул.?.?.?, пыта€сь поразить (.*) магической стрелой.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "маг.стрел на $2";
} "^(.*) выпустил.?.?.? в (.*) магическую стрелу, котора€ достигла цели.",'f1000000-:TURNIR';

# Poison


P::trig
{	
	$damagers{$1} = '';
	$results{$1} .= ",умер :(";
} "^(.*) забил.?.?.? в судорогах, страда€, выт€нул.?.?.? и затих",'f1000000-:TURNIR';

# Shocking Grasp

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "хватка";
	$results{$2} .= ",RIP $1";
} "^(.*) упал.?.?.? замеpтво, не в силах пережить шокирующей хватки (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "хватка на $1";
	$results{$2} .= ",фэйл!";
} "^(.*) увеpнул.?.?.?, и (.*) не сумел.?.?.? схватить",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "хватка на $1";
} "^(.*) застонал.?.?.?, когда (.*) сломал.?.?.? .* несколько костей.",'f1000000-:TURNIR';

# Dispel Good


P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "расс.свет";
	$results{$1} .= ",RIP $2";
} "^(.*) затоптал.?.?.? последние искры света в душе (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "расс.свет на $1";
	$results{$2} .= ",фэйл!";
} "^(.*) улыбнул.?.?.?, наблюда€ безуспешные попытки (.*) разве€ть",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "расс.свет на $1";
} "^(.*) зашатал.?.?.? и потемнел.?.?.? от слов (.*)\\.",'f1000000-:TURNIR';

#  Chain Lightning

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "молни€";
	$results{$1} .= ",RIP $2";
} "^ѕосле молнии, вызванной (.*), от (.*) остались одни угли.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "молни€ на $1";
	$results{$2} .= ",фэйл!";
} "^(.*) отпрыгнул.?.?.? назад от посланной в н.?.?.? (.*) молнии.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "молни€ на $1";
} "^(.*) закричал.?.?.? от боли, когда в н.?.?.? попала молни€, пущенна€ (.*)\\.",'f1000000-:TURNIR';

# Implosion
P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "гнев";
	$results{$1} .= ",RIP $2";
} "^»злучаемый (.*) гнев оставил от (.*) лишь кучку пепла.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "гнев на $2";
	$results{$1} .= ",фэйл!";
} "^¬олна гнева (.*) прошла мимо (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "гнев на $2";
} "^(.*) разгневанно взгл€нул.?.?.? на .*. (.*) окружила волна пламени.",'f1000000-:TURNIR';

# Acid blast

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "кисла";
	$results{$1} .= ",RIP $2";
} "^(.*) обдал.?.?.? кислотой (.*), обратив .* в однородную массу.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "кисла на $2";
	$results{$1} .= ",фэйл!";
} "^(.*) не попал.?.?.? своей кислотой в (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "кисла на $2";
} "^(.*) плеснул.?.?.? кислотой в (.*), обдав .?.?.? с головы до п€т.",'f1000000-:TURNIR';

# Sacrifice

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "дрын";
	$results{$1} .= ",RIP $2";
} "^(.*) выпил.?.?.? остатки жизненных соков у (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "дрын на $2";
	$results{$1} .= ",фэйл!";
} "^(.*) попытал.?.?.? выпить жизненные соки у (.*), но у н.?.?.? ничего не вышло.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "дрын на $2";
} "^(.*) отхлебнул.?.?.? часть жизненных соков у (.*)\\.",'f1000000-:TURNIR';

# Stunning

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "кам.прокл";
	$results{$1} .= ",RIP $2";
} "^(.*) оглушил.?.?.? (.*)\\. ѕусть земл€ будет .?.?.? пухом.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "кам.прокл на $2";
	$results{$1} .= ",фэйл!";
} "^(.*) не попал.?.?.? в (.*) своим заклинанием.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "кам.прокл на $1";
} "^(.*) стало плохо после того, как (.*) оглушил",'f1000000-:TURNIR';


# Cone of cold
P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "лед.вет";
	$results{$1} .= ",RIP $2";
} "^(.*) заморозил.?.?.? (.*) и раздробил.?.?.? .?.?.? на крохотные осколки.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "лед.вет на $2";
	$results{$1} .= ",фэйл!";
} "^(.*) не попал своим заклинанием в (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "лед.вет на $2";
} "^(.*) призвал.?.?.? лед€ной ветер, который обморозил (.*)\\.",'f1000000-:TURNIR';



#MASSFRAG


# Earthquake
P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "тр€с";
} "^(.*) опустил.?.?.? руки, и земл€ задрожала !",'f1000000-:TURNIR';

P::trig
{	
	$results{$curr_actor} .= ",RIP $2";
} "^(.*) удалось убедить «емлю прин€ть (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	$results{$curr_actor} .= ",$1 повалило";
} "^(.*) повалило на землю.",'f1000000-:TURNIR';




# Armageddon

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "суд";
} "^(.*) сплел.?.?.? руки в замысловатом жесте, и все потускнело !",'f1000000-:TURNIR';

P::trig
{	
	$results{$curr_actor} .= ",RIP $2";
} "^(.*) отправил.?.?.? (.*) на судилище к Ѕогам.",'f1000000-:TURNIR';

# mass blind

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "масс.слепь";
} "^¬друг над головой (.*) возникла €рка€ вспышка.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "пыл.бур€";
} "^¬ас поглотила пылева€ бур€, вызванна€ (.*)\\.",'f1000000-:TURNIR';


P::trig
{	
	$results{$curr_actor} .= ",$1 слеп";
} "^(.*) ослеп",'f1000000-:TURNIR';


# Mass Deafness

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "масс.глух";
} "^ ак только (.*) склонил.?.?.? голову, раздалс€ оглушающий хлопок.",'f1000000-:TURNIR';

P::trig
{	
	$results{$curr_actor} .= ",$1 оглох";
} "^(.*) оглох.?.?.? !",'f1000000-:TURNIR';


P::trig
{	
	$results{$curr_actor} .= ",$1 ослаб";
} "^(.*) стал.?.?.? немного слабее.",'f1000000-:TURNIR';

P::trig
{	
	P::echo ">" . $curr_actor;
	$results{$curr_actor} .= ",$1 в холде";
} "^(.*) замер.?.?.? на месте !",'f1000000-:TURNIR';

P::trig
{	
	$results{$curr_actor} .= ",$1 в молче";
} "^(.*) прикусил.?.?.? €зык !",'f1000000-:TURNIR';




# Fire blast

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "огн.поток";
} "^Ќа ладон€х (.*) вспыхнуло €ркое плам€ !",'f1000000-:TURNIR';

# ice storm

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "шторм";
} "^(.*) воздел.?.?.? руки к небу, и тыс€чи мелких льдинок хлынули вниз !",'f1000000-:TURNIR';

P::trig
{	
	$results{$curr_actor} .= ",$1 оглушило";
} "^(.*) оглушило.",'f1000000-:TURNIR';


# Mass Fear

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "масс.страх";
} "^(.*) огл€дел.?.?.? комнату устрашающим взгл€дом.",'f1000000-:TURNIR';


# chain Lighting

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "цепь.молн";
} "^(.*) подн€л.?.?.? руки к небу и оно осветилось €ркими вспышками !",'f1000000-:TURNIR';

# Earthfall
P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "камни";
} "^(.*) высоко подбросил.?.?.? комок земли, который, увеличива€сь на глазах, стал падать вниз.",'f1000000-:TURNIR';

# Sonicwave
P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "волна";
} "^Ќегромкий хлопок (.*) породил воздушную волну, сокрушающую все на своем пути.",'f1000000-:TURNIR';


######DAMAGE

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^ќт удара (.*) (.*) отправил.?.?.? в мир теней.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$2} = $1;
} "^(.*) сумел.?.?.? уклонитьс€ от удара (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$2} = $1;
	$results{$2} .= ",RIP $1";
} "^(.*) скончал.?.?.? мгновенно после сильнейшего удара (.*)\\.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$2} = $1;
} "^(.*) увернул.?.?.? от удара (.*)\\.",'f1000000-:TURNIR';


P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) разорвал.?.?.? (.*) на мелкие кусочки. ¬от это смерть!",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? ободрать (.*) - неудачно.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) содрал.?.?.? шкуру с (.*)\\. .* очень больно и .* умирает.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) не смог.?.?.? ободрать (.*) - .* просто промазал",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) хлестнул.?.?.? (.*) - кажетс€, .* уже хватит.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? хлестнуть (.*), но промахнул",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) своим хлестким ударом лишил.?.?.? (.*) жизни.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$2} = $1;
} "^(.*) увернул.?.?.? от попытки (.*) хлестнуть",'f1000000-:TURNIR';


P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) изрубил.?.?.? .* в фарш. ѕри жизни (.*) выгл€дел.?.?.? лучше.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? рубануть (.*), но промахнул",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) изрубил.?.?.? .*. ќт (.*) осталось только кровавое месиво.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? рубануть (.*), но этот удар прошел мимо.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) вцепил.?.?.? в шею (.*), загрыз.* до смерти.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? укусить (.*), но поймал.?.?.? зубами лишь воздух.",'f1000000-:TURNIR';


P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) перегрыз.?.?.? глотку (.*), вызвав мгновенную смерть.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? укусить (.*), но лишь громко клацнул.?.?.? зубами.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) огрел.?.?.? .*. ∆изнь (.*) дала трещину.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? огреть (.*), но промахнул",'f1000000-:TURNIR';


P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) огрел.?.?.? .*. ѕосле такого удара мало кто выживал. (.*) не стал.?.?.? исключением.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? огреть (.*), но .?.?.? удар не достиг цели.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$2} = $1;
	$results{$2} .= ",RIP $1";
} "^(.*) насмерть сокрушен.?.?.? (.*)\\.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? сокрушить (.*), но .?.?.? удар не достиг цели.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) смертельно сокрушил.?.?.? .*. ћстить .?.?.? (.*) будет уже в другой жизни.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? сокрушить (.*), но промахнул",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) резанул.?.?.? (.*), выпустив дух из .?.?.? тела",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? резануть (.*), но промахнул",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) резанул.?.?.? .*. ќт этого удара (.*) успустил.?.?.? последний вздох.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? резануть (.*), но .?.?.? удар не достиг цели.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) оцарапал.?.?.? (.*) своими когт€ми. ќт такого умрет кто угодно.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? оцарапать (.*), но .* послал.*подальше.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) смертельно оцарапал.?.?.? .*. (.*) умер.?.?.? от огромной потери крови.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? оцарапать (.*), но промахнул",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^ћеткий выстрел (.*) послал (.*) в мир иной.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? подстрелить (.*), но промахнул",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^—трела (.*) оборвала жизнь (.*)\\. “акова се л€ ви!",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? подстрелить (.*), но .?.?.? стрела не достигла цели.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) зверски распорол.?.?.? (.*) на несколько частей, убив",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? пырнуть (.*), но промахнул",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) зверски пырнул.?.?.? .*\\. (.*) умирает в страшных муках.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? пырнуть (.*), но .?.?.? удар не достиг цели.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) пронзил.?.?.? (.*) насквозь и .?.?.? безжизненное тело упало за землю.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? уколоть (.*), но промахнул",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) проткнул.?.?.? .* насквозь. ¬ страшных муках (.*) умер",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? проткнуть (.*), но .?.?.? удар не достиг цели.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) сильно ткнул.?.?.? (.*), вызвав мгновенную смерть.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? ткнуть (.*), но промахнул",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) так сильно ткнул.?.?.? (.*), что .* не оставалось ничего, кроме как умереть.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? ткнуть (.*), но .* удар не достиг цели.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) очень сильно л€гнул.?.? .*. ѕохоже, что (.*) не выдержал.* удара и погиб",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? л€гнуть (.*), но промахнул",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) очень сильно л€гнул.?.?.? .*\\. (.*) не вынес.* такого удара и скончал.* на месте.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.* л€гнуть (.*), но .* удар не достиг цели.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) забодал.*насмерть. Ѕедн.?.?.? (.*)!",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? боднуть (.*), но промахнул",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) насмерть забодал.?.?.? (.*). —мерть .* была ужастна!",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? боднуть (.*), но .* удар не достиг цели.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) досмерти заклевал.?.?.? (.*)\\. ¬от это расправа!",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? клюнуть (.*), но .* старани€ не достигли цели.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) попытал.?.?.? клюнуть (.*), но .* старани€ не достигли цели.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $3;
} "^(.*) попытал.?.?.? $weapattack_2 (.*), но промахнул.?.?.?.",'f1000000-:TURNIR';
P::trig
{
	$damagers{$1} = $3;
} "^(.*) легонько $weapattack_1.?.?.? (.*)\\.",'f1000000-:TURNIR';
P::trig
{
	$damagers{$1} = $3;
} "^(.*) слегка $weapattack_1.?.?.? (.*)\\.",'f1000000-:TURNIR';

P::trig
{
	return if $1 =~ /(легонько|слегка|сильно|очень сильно|чрезвычайно сильно|∆≈—“ќ ќ|ЅќЋ№Ќќ|ќ„≈Ќ№ ЅќЋ№Ќќ|„–≈«¬џ„ј…Ќќ ЅќЋ№Ќќ|Ќ≈¬џЌќ—»ћќ ЅќЋ№Ќќ|”∆ј—Ќќ|—ћ≈–“≈Ћ№Ќќ)/;
	$damagers{$1} = $3;

} "^(.*) $weapattack_1.?.?.? (.*)\\.",'f1000000-:TURNIR';

P::trig
{
	return if $1 =~ /(очень|чрезвычайно)/;
	$damagers{$1} = $3;
} "^(.*) сильно $weapattack_1.?.?.? (.*)\\.",'f1000000-:TURNIR';
P::trig
{
	$damagers{$1} = $3;
} "^(.*) очень сильно $weapattack_1.?.?.? (.*)\\.",'f1000000-:TURNIR';
P::trig
{
	$damagers{$1} = $3;
} "^(.*) чрезвычайно сильно $weapattack_1.?.?.? (.*)\\.",'f1000000-:TURNIR';
P::trig
{
	$damagers{$1} = $3;
} "^(.*) ∆≈—“ќ ќ $weapattack_1.?.?.? (.*)\\.",'f1000000-:TURNIR';
P::trig
{
	return if $1 =~ /(ќ„≈Ќ№|„–≈«¬џ„ј…Ќќ|Ќ≈¬џЌќ—»ћќ)/;
	$damagers{$1} = $3;
} "^(.*) ЅќЋ№Ќќ $weapattack_1.?.?.? (.*)\\.",'f1000000-:TURNIR';
P::trig
{
	$damagers{$1} = $3;
} "^(.*) ќ„≈Ќ№ ЅќЋ№Ќќ $weapattack_1.?.?.? (.*)\\.",'f1000000-:TURNIR';
P::trig
{
	$damagers{$1} = $3;
} "^(.*) „–≈«¬џ„ј…Ќќ ЅќЋ№Ќќ $weapattack_1.?.?.? (.*)\\.",'f1000000-:TURNIR';
P::trig
{
	$damagers{$1} = $3;
} "^(.*) Ќ≈¬џЌќ—»ћќ ЅќЋ№Ќќ $weapattack_1.?.?.? (.*)\\.",'f1000000-:TURNIR';
P::trig
{
	$damagers{$1} = $3;
} "^(.*) ”∆ј—Ќќ $weapattack_1.?.?.? (.*)\\.",'f1000000-:TURNIR';
P::trig
{
	$damagers{$1} = $3;
} "^(.*) —ћ≈–“≈Ћ№Ќќ $weapattack_1.?.?.? (.*)\\.",'f1000000-:TURNIR';


####OTHER

# Suffering

P::trig
{	
	$damagers{$1} = '';
	$results{$1} .= ",умер :(";
} "^(.*) лежал.?.?.?, страда€, на земле, пока не осталось крови в .?.?.? бренном теле.",'f1000000-:TURNIR';
P::trig
{	
	$damagers{$1} = '';
	$results{$1} .= ",умер :(";
} "^(.*) потер€л.?.?.? много крови и погиб",'f1000000-:TURNIR';


####NPC ATTACK
P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) оставил.?.?.? от (.*) лишь кучку пепла.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$2} = $1;
} "^(.*) подгорел.?.?.? в нескольких местах, когда (.*) дыхнул.?.?.? на .?.?.? огнем.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) убил.?.?.? (.*) смертельно дыхнув на н",'f1000000-:TURNIR';

P::trig
{
	$damagers{$1} = $2;
} "^(.*) напустил.?.?.? газ на (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) сделал из (.*) кусок льда.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$2} = $1;
} "^(.*) медленно покрываетс€ льдом, после морозного дыхани€ (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) заставил.?.?.? .* забитьс€ в судорогах. (.*) умирает...",'f1000000-:TURNIR';

P::trig
{
	$damagers{$2} = $1;
} "^(.*) бьетс€ в судорогах от кислотного дыхани€ (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	$damagers{$1} = $2;
	$results{$1} .= ",RIP $2";
} "^(.*) убил.?.?.? (.*) ослепл€ющим дыханием.",'f1000000-:TURNIR';

P::trig
{
	$damagers{$2} = $1;
} "^(.*) ослеплен.?.?.? дыханием (.*)\\.",'f1000000-:TURNIR';


#***************************************************************************
#*                          Offensive Skills                               *
#***************************************************************************

# Throw
P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "метает";
	$results{$1} .= ",RIP $2";
} "^ћеткий бросок (.*) заставил (.*) покинуть сей бренный мир.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "метает в $1";
	$results{$2} .= "фэйл";
} "^(.*) сумел.?.?.? уклонитьс€ от броска (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "метает в $2";
} "^ћеткий бросок (.*) заставил (.*) застонать от боли.",'f1000000-:TURNIR';


# Backstab
P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "стаб";
	$results{$1} .= ",RIP $2";
} "^(.*) нанизал.?.?.? .* на свое оружие. (.*) теперь словно поросенок на вертеле.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "стаб в $2";
	$results{$1} .= "фэйл";
} "^(.*) попытал.?.?.? нанести (.*) удар в спину, но .?.?.? заметили.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "стаб в $2";
} "^(.*) воткнул.?.?.? свое оружие в спину (.*)\\. ўа начнетс€ убивство.",'f1000000-:TURNIR';


P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "стаб";
	$results{$1} .= ",RIP $2";
} "^ћастерским ударом в спину, (.*) отправил.?.?.? (.*) к праотцам.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "стаб в $2";
	$results{$1} .= "фэйл";
} "^(.*) не попал.?.?.? своим оружием в спину (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "стаб в $2";
} "^(.*) нанес.?.?.? удар своим оружием в спину (.*)\\.",'f1000000-:TURNIR';

# bash
P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "баш";
	$results{$2} .= ",RIP $1";
} "^(.*) завалил.?.?.? на землю от удара (.*), да так и остал.?.?.? лежать.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "баш в $1";
	$results{$2} .= "фэйл";
} "^(.*) уклонил.?.?.? от попытки (.*) завалить",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "баш в $2";
} "^(.*) завалил.?.?.? (.*) на землю мощным ударом.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "баш";
	$results{$2} .= ",RIP $1";
} "^(.*) рухнул.?.?.? на землю и рассыпал.?.?.? после мощного удара (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "баш в $2";
	$results{$1} .= "фэйл";
} "^(.*) попытал.?.?.? завалить (.*), но .?.?.? уклонил",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "баш в $1";
	$results{$2} .= "фэйл";
} "^(.*) избежал.?.?.? попытки (.*) завалить",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "баш в $2";
	$results{$1} .= "фэйл";
} "^(.*) попытал.?.?.? завалить (.*), но не тут-то было.",'f1000000-:TURNIR';



P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "баш в $2";
} "^ќдним ударом (.*) повалил.?.?.? (.*) на землю.",'f1000000-:TURNIR';


# kick
P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "пинок";
	$results{$2} .= ",RIP $1";
} "^(.*) погиб.?.?.? от мощного удара ноги (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "пинок в $2";
	$results{$1} .= "фэйл";
} "^(.*) попытал.?.?.? пнуть (.*)\\. «аймите же .?.?.? ловкости.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "пинок в $3";
} "^(.*) $howstr пнул.?.?.? (.*)\\. Ћицо .* искривилось в гримасе боли.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "пинок";
	$results{$1} .= ",RIP $2";
} "^(.*) убил.?.?.? (.*) своим €дреным пинком",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $2;
	$curr_actor = $2;
	$actors{$2} = "пинок в $1";
	$results{$2} .= "фэйл";
} "^(.*) увернул.?.?.? от мощного пинка (.*)\\.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "пинок в $3";
} "^(.*) $howstr пнул.?.?.? .*\\. “еперь (.*) дико вращает глазами от боли.",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "реск $2";
} "^(.*) героически спас.?.?.? (.*)!",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "подсек $2";
} "^(.*) ловко подсек.?.?.? (.*), уронив",'f1000000-:TURNIR';

P::trig
{	
	push @actors_seq, $1;
	$curr_actor = $1;
	$actors{$1} = "подсечка $2";
	$results{$1} .= "фэйл";
} "^(.*) попытал.?.?.? подсечь (.*), но упал",'f1000000-:TURNIR';


###OTHER SPELLS


sub analyze_cast(@)
{	
 my $caster = shift;
 my $spell = shift;
 my $victim = shift; 

 push @actors_seq, $caster;
 $curr_actor = $caster;


 if ($spell eq '')
 {
	$actors{$caster} = "кастует";
 	return;
 };

 if ($spell eq 'рунит')
 {
	$actors{$caster} = "рунит";
 	return;
 };


 if ($spell =~ /(—трибог, даруй прибежище)|(защита от ветра и покров от непогоды)|(воздушный щит)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "возд.щит";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(’орс, даруй прибежище)|(душа гор€ча€, как пылающий огонь)|(огненный щит)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "огн.щит";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(ћорена, даруй прибежище)|(а снег и лед выдерживали огонь и не та€ли)|(лед€ной щит)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "лед.щит";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(буде во прибежище)|(ќн - помощь наша и защита наша)|(защита)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "защита";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(ист€гну умь крепостию)|(даст блага прос€щим у Ќего)|(доблесть)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "добл";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }


 if ($spell =~ /(пусть будет много мен€)|(и плодились, и весьма умножились)|(клонирование)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "клонир";
 	return;
 }
 if ($spell =~ /(стихи€ подкор€шис€)|(власть затворить небо, чтобы не шел дождь)|(контроль погоды)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "контроль.пог";
 	return;
 }
 if ($spell =~ /(будовати снедь)|(это хлеб, который √осподь дал вам в пищу)|(создать пищу)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "созд.хле";
 	return;
 }
 if ($spell =~ /(напоиши влагой)|(и потекло много воды)|(создать воду)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "созд.вод";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(зр€ще узрите)|(и прозр€т из тьмы и мрака глаза слепых)|(вылечить слепоту)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "сн€ть.слеп";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(малейше целити раны)|(да зат€нутс€ раны твои)|(легкое исцеление)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "лег.исц";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(узр€ще норов)|(и отделит одних от других, как пастырь отдел€ет овец от козлов)|(определение наклонностей)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "опр.накл";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(взор мечетный)|(ибо нет ничего тайного, что не сделалось бы €вным)|(видеть невидимое)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "вид.невид";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(зр€ще ворожбу)|(покажись, ересь богопротивна€)|(определение магии)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "опр.магии";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(зр€ще трутизну)|(по плодам их узнаете их)|(определение €да)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "опр.€да";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(згола гой еси)|(тебе говорю, встань)|(исцеление)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "хил";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(гой еси)|(да зарубцуютс€ гноища твои)|(критическое исцеление)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "крит.исц";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(низовати мечетно)|(ибо видимое временно, а невидимое вечно)|(невидимость)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "инвиз";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(супостат нощи)|(свет, который в тебе, да убоитс€ тьма)|(защита от тьмы)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "защ.от.тьм";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(изыде порча)|(да прост€тс€ тебе прегрешени€ твои)|(сн€ть прокл€тье)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "сн€.прокл";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(иже во св€тых, други)|(будьте св€ты, аки √осподь наш св€т)|(групповое осв€щение)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "гр.санк";
 	return;
 }
 if ($spell =~ /(иже во св€тых)|(буде св€тым, аки √осподь наш св€т)|(осв€щение)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "санк";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(будет силен)|(и человек разумный укрепл€ет силу свою)|(сила)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "сила";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(кличу-велю)|(и послали за ним и призвали его)|(призвать)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "призыв";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(с глаз долой исчезни)|(ступай с миром)|(слово возврата)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "слово.возвр";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(изыде трутизна)|(именем Ѕожьим, изгнати сгниенье из тела)|(удалить €д)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "сн€.€д";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(зр€ще живота)|(ибо нет ничего сокровенного, что не обнаружилось бы)|(определение жизни)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "опр.жиз";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(прибежище други)|(ибо кто Ѕог, кроме √оспода, и кто защита, кроме Ѕога нашего)|(группова€ защита)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "гр.защ";
 	return;
 }
 if ($spell =~ /(други, гой еси)|(вам говорю, встаньте)|(групповое исцеление)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "√’";
 	return;
 }
 if ($spell =~ /(исчезните с глаз моих)|(вам говорю, ступайте с миром)|(групповой возврат)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "гр.рекол";
 	return;
 }
 if ($spell =~ /(целите раны)|(да уменьшатс€ раны твои)|(серьезное исцеление)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "сер.исц";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(други сильны)|(и даст нам √осподь силу)|(группова€ сила)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "гр.сила";
 	return;
 }
 if ($spell =~ /(летать зегзицею)|(и полетел, и понесс€ на крыль€х ветра)|(полет)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "полет";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(буде тверд аки камень)|(твердость ли камней твердость тво€)|(каменна€ кожа)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "кам.кож";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(мгла покрыла)|(будут как утренний туман)|(затуманивание)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "туман";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(други, низовати мечетны)|(возвещай всем великую силу Ѕога. », сказав сие, они стали невидимы)|(группова€ невидимость)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "гр.инвиз";
 	return;
 }
 if ($spell =~ /(возросши к небу)|(и плоть выросла)|(увеличение)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "увелич";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(буде быстр аки прежде)|(встань, и ходи)|(сн€ть оцепенение)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "дисхолд";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(буде полон здоровь€)|(крепкое тело лучше несметного богатства)|(увеличить жизнь)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "увж";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(глаголите)|(слова из уст мудрого - благодать)|(сн€ть молчание)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "сн€.молч";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(крыла им створисте)|(и все летающие по роду их)|(групповой полет)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "гр.полет";
 	return;
 }
 if ($spell =~ /(други, наполнис€ ратнаго духа)|(блажены те, слышащие слово Ѕожие)|(группова€ доблесть)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "гр.добл";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(буде свеж)|(не будет у него ни усталого, ни изнемогающего)|(восстановление)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "фреш";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(брюхо полно)|(душа больше пищи, и тело - одежды)|(насыщение)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "насыщ";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(не затвори темне березе)|(дух дышит, где хочет)|(дышать водой)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "дышка";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(быстры аки €стребов ста€)|(и они быстры как серны на горах)|(групповое ускорение)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "гр.ускор";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(скор аки €стреб)|(поднимет его ветер и понесет, и он быстро побежит от него)|(ускорение)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "ускор";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(Ќавь, очисти тело)|(хочу, очистись)|(вылечить лихорадку)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "сн€.лихор";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(око недреманно)|(не дам сна очам моим и веждам моим - дремани€)|(внимательность)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "внимательность";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(изыде ворожба)|(выйди, дух нечистый)|(разве€ть магию)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "разв.магию";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(заживет аки на собаке)|(нет богатства лучше телесного здоровь€)|(быстрое восстановление)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "бв";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(ƒажьбог, даруй защитника)|(јнгел ћой с вами, и он защитник душ ваших)|(огненный защитник)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "огн.защитник";
 	return;
 }
 if ($spell =~ /(—варог, даруй защитника)|(и благословен защитник мой)|(защитник)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "защитник";
 	return;
 }
 if ($spell =~ /(буде мал аки мышь)|(плоть на нем пропадает)|(уменьшение)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "уменьш";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(гладь воды отразит)|(воздай им по делам их, по злым поступкам их)|(магическое зеркало)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "зеркало";
 	return;
 }
 if ($spell =~ /(сильны велетов руки)|(рука ћо€ пребудет с ним, и мышца ћо€ укрепит его)|(каменные руки)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "кам.руки";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(други, буде окружены радугой)|(взгл€ни на радугу, и прославь —отворившего ее)|(группова€ призматическа€ аура)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "гр.призм";
 	return;
 }
 if ($spell =~ /(окружен радугой)|(€витс€ радуга в облаке)|(призматическа€ аура)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "призма";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(зло твор€ще)|(и ты воздашь им злом)|(силы зла)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "сз";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(оглохни)|(и глухота поразит теб€)|(глухота)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "глухота";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(слушай глас мой)|(услышь слово ≈го)|(сн€ть глухоту)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "сн€.глух";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(да застит уши твои)|(и будь глухим надолго)|(длительна€ глухота)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "дл.глух";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
 if ($spell =~ /(∆ивый в помощи ¬ышн€го)|(благословен буде √р€дый во им€ √осподне)|(защита богов)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "«Ѕ";
 	return;
 }
 if ($spell =~ /(разум аки мутный омут)|(и безумие его с ним)|(повреждение разума)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "повр.разума на $victim";
 	return;
 }
 if ($spell =~ /(буде чахнуть)|(и силу могучих ослабл€ет)|(слабость)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "слабость на $victim";
 	return;
 }
 if ($spell =~ /(порча их)|(прокл€ты вы пред всеми скотами)|(массовое прокл€тье)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "масс.прокл";
 	return;
 }
 if ($spell =~ /(порча)|(прокл€т ты пред всеми скотами)|(прокл€тье)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "прокл на $victim";
 	return;
 }
 if ($spell =~ /(иже дремлет)|(на веки твои т€жесть покладет)|(сон)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "сон на $victim";
 	return;
 }
 if ($spell =~ /(згола аки околел)|(замри надолго)|(длительное оцепенение)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "дл.холд на $victim";
 	return;
 }
 if ($spell =~ /(их окалеть)|(замрите)|(массовое оцепенение)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "ћ’";
 	return;
 }
 if ($spell =~ /(аки околел)|(замри)|(оцепенение)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "холд на $victim";
 	return;
 }
 if ($spell =~ /(типун тебе на €зык!)|(да замкнутс€ уста твои)|(молчание)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "молч на $victim";
 	return;
 }
 if ($spell =~ /(згола застить очеса)|(поразит теб€ √осподь слепотою навечно)|(полна€ слепота)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "дл.слепь на $victim";
 	return;
 }
 if ($spell =~ /(згола не прерчет)|(исход€щее из уст твоих, да не осквернит слуха)|(длительное молчание)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "дл.молч на $victim";
 	return;
 }
 if ($spell =~ /(„тоб твои зенки вылезли!)|(поразит теб€ √осподь слепотою)|(слепота)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "слепь на $victim";
 	return;
 }
 if ($spell =~ /(трутизна)|(и пошлю на них зубы зверей и €д ползающих по земле)|(€д)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "€д на $victim";
 	return;
 }

 if ($spell =~ /(падоша в тернии)|(убойс€ того, кто по убиении ввергнет в геенну)|(страх)/)
 {
	push @actors_seq, $caster;
	$actors{$caster} = "страх";
	$actors{$caster} .= " на $victim" unless $victim eq '';
 	return;
 }
	
# $actors{$caster} = "кастует";


}


P::trig
{
 my @params;
 push @params, $1;
 push @params, "рунит";
 analyze_cast @params;
} "^(.*) сложил.?.?.? руны, которые вспыхнули €рким пламенем." , 'f1000000-:TURNIR';

P::trig
{
 my @params;
 push @params, $1;
 push @params, $2;
 analyze_cast @params;
} "^(.*) прикрыл.?.?.? глаза и прошептал.?.?.? : \'(.*)\'" , 'f1000000-:TURNIR';
P::trig
{
 my @params;
 push @params, $1;
 push @params, $3;
 push @params, $2;
 analyze_cast  @params;
} "^(.*) взгл€нул.?.?.? на (.*) и произнес.?.?.? : \'(.*)\'" , 'f1000000-:TURNIR';
P::trig
{
 return if $1 =~ /взгл€нул.?.?.? на/;
 my @params;
 push @params, $1;
 push @params, $2;
 analyze_cast @params;
} "^(.*) произнес.?.?.? : \'(.*)\'" , 'f1000000-:TURNIR';

P::trig
{
 my @params;
 push @params, $1;
 push @params, $2;
 analyze_cast @params;
} "^(.*) пробормотал.?.?.? : \'(.*)\'" , 'f1000000-:TURNIR';
P::trig
{
 my @params;
 push @params, $1;
 push @params, $3;
 push @params, $2;
 analyze_cast  @params;
} "^(.*) взгл€нул.?.?.? на (.*) и бросил.?.?.? : \'(.*)\'" , 'f1000000-:TURNIR';

#P::trig
#{
# analyze_cast $1,'','';
#} "^(.*) издал.?.?.? непон€тный звук" , 'f1000000-:TURNIR';



1;



